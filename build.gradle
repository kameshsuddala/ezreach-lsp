plugins {
	id 'java'
	id "com.bmuschko.docker-remote-api" version "5.2.0"
}
import com.bmuschko.gradle.docker.tasks.image.DockerBuildImage
import com.bmuschko.gradle.docker.tasks.image.DockerPushImage

docker {
    registryCredentials {
        url = 'https://hub.docker.com'
        username = "kameshsuddala"
        password = "Mysite@123"
    }
}

task buildImage(type: DockerBuildImage) {
    description "Builds docker image."
    dependsOn build
    inputDir = file(".")
    dockerFile = file('./Dockerfile')
    tags = ["hub.docker.com/repository/docker/kameshsuddala/ezreach:1.0"]
}

/**
 * Push the docker image
 */
task pushImage(type: DockerPushImage) {
    dependsOn buildImage
    description "Pushes docker image."
    imageName = 'hub.docker.com/repository/docker/kameshsuddala/ezreach'
    tag = "1.0"
}
subprojects {
	apply plugin: "java"
	group = 'com.ezyreach.lsp'
	version = '1.0'

	sourceCompatibility = 1.8
	targetCompatibility = 1.8
	repositories {
		mavenLocal()
		jcenter()
	}

}
